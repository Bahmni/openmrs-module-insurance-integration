<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">


	<changeSet id="nepalEhr-2019-04-15-11:30" author="dipakthapa">
		<preConditions onFail="MARK_RAN">
			<sqlCheck expectedResult="0">
				select count(*) from
				person_attribute_type where name='NHIS Number';
			</sqlCheck>
		</preConditions>
		<comment>
           	Adds person attribute to record insurance data
        </comment>
		<sql>
			insert into person_attribute_type(name, description,
			format,searchable, creator, date_created, uuid) values('NHIS Member','Is NHIS member','java.lang.Boolean',0, 1, now(), uuid()),
			('NHIS Number','NHIS Number','java.lang.String', 1, 1, now(), uuid()),
			('NHIS Primary Contact Point','Is NHIS primary contact point','java.lang.Boolean',0, 1, now(), uuid());
		</sql>
	</changeSet>
	
	<!-- <changeSet id="bed-type-concept-201911111023" author="dipakthapa">
        <comment>Add Bed type concept procedure</comment>
        <sql>
            DROP PROCEDURE IF EXISTS add_bed_type_concept;
        </sql>
        <sqlFile splitStatements="false" path="migration/V1_0001_addBedTypeConcept.sql" />
    </changeSet>
    
    <changeSet id="setup-bed-type-concept-201911111030" author="dipakthapa">
        <sql>
            DROP PROCEDURE IF EXISTS setup_bed_type_concepts;
        </sql>
        <comment>Setup all Bed type concept</comment>
        <sqlFile splitStatements="false" path="migration/V1_0002_setupBedTypeConcepts.sql" />
        <sql>call setup_bed_type_concepts();</sql>
    </changeSet> -->
    
    <changeSet id="bed-type-concept-2019-11-15-11:20" author="dipakthapa">
        <preConditions onFail="MARK_RAN">
            <sqlCheck expectedResult="0">
                SELECT COUNT(*) FROM scheduler_task_config where name = 'OpenMRS Bed Sales Quotation Generator Scheduler';
            </sqlCheck>
        </preConditions>
        <comment>
            Add a scheduler for daily bed sales quotation
        </comment>
        <sqlFile path="migration/V1_0001_setupBedQuotationScheduler.sql"/>
    </changeSet>

</databaseChangeLog>